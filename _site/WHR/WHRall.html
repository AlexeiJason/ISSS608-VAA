<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lexeiâ€™s Projects - WHR2010-2019</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Images/Robo.gif" rel="icon" type="image/gif">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../Images/Robo.gif" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-home" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Home</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-home">    
        <li>
    <a class="dropdown-item" href="../index.html">
 <span class="dropdown-text">Home</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../about.html">
 <span class="dropdown-text">Welcome Abroad!</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercises">    
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX02/Hands-on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX03/Hands-on_Ex03a.html">
 <span class="dropdown-text">Hands-on Exercise 3a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX03/Hands-on_Ex03b.html">
 <span class="dropdown-text">Hands-on Exercise 3b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX04/Hands-on_Ex04a.html">
 <span class="dropdown-text">Hands-on Exercise 4a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX04/Hands-on_Ex04b.html">
 <span class="dropdown-text">Hands-on Exercise 4b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX04/Hands-on_Ex04c.html">
 <span class="dropdown-text">Hands-on Exercise 4c</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX04/Hands-on_Ex04d.html">
 <span class="dropdown-text">Hands-on Exercise 4d</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX05/Hands-on_Ex05a.html">
 <span class="dropdown-text">Hands-on Exercise 5a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX05/Hands-on_Ex05b.html">
 <span class="dropdown-text">Hands-on Exercise 5b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX05/Hands-on_Ex05c.html">
 <span class="dropdown-text">Hands-on Exercise 5c</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX05/Hands-on_Ex05d.html">
 <span class="dropdown-text">Hands-on Exercise 5d</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX05/Hands-on_Ex05e.html">
 <span class="dropdown-text">Hands-on Exercise 5e</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX06/Hands-on_Ex06.html">
 <span class="dropdown-text">Hands-on Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX07/Hands-on_Ex07a.html">
 <span class="dropdown-text">Hands-on Exercise 7a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX07/Hands-on_Ex07b.html">
 <span class="dropdown-text">Hands-on Exercise 7b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX07/Hands-on_Ex07c.html">
 <span class="dropdown-text">Hands-on Exercise 7c</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX09/Hands-on_Ex09.html">
 <span class="dropdown-text">Hands-on Exercise 9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_EX/Hands-on_EX10/Hands-on_Ex10.html">
 <span class="dropdown-text">Hands-on Exercise 10</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercises">    
        <li>
    <a class="dropdown-item" href="../In-class_EX/In-class_EX01/In-class_Ex01.html">
 <span class="dropdown-text">In-class Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../In-class_EX/In-class_EX06/In-class_Ex06.html">
 <span class="dropdown-text">In-class Exercise 6</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercises">    
        <li>
    <a class="dropdown-item" href="../Take-home_EX/Take-home_EX01/Take-home_Ex01.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Take-home_EX/Take-home_EX02/Take-home_Ex02.html">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Take-home_EX/Take-home_EX03/Take-home_Ex03.html">
 <span class="dropdown-text">Take-home Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Take-home_EX/Take-home_EX04/Take-home_Ex04.html">
 <span class="dropdown-text">Take-home Exercise 4</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../index.html">
 <span class="dropdown-text">Coming Soon!</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/alexei-jason-51a137170/"> <i class="bi bi-linkedin" role="img" aria-label="Linkedin">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/AlexeiJason"> <i class="bi bi-github" role="img" aria-label="Github">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://public.tableau.com/app/profile/alexei.jason/vizzes"> <i class="bi bi-diagram-3-fill" role="img" aria-label="Tableau">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#importing-packages" id="toc-importing-packages" class="nav-link active" data-scroll-target="#importing-packages">Importing Packages</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data">Importing Data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">WHR2010-2019</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="importing-packages" class="level2">
<h2 class="anchored" data-anchor-id="importing-packages">Importing Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(skimr,tidyverse, patchwork, readr, dplyr, plotly, ggridges, ggiraph, ggthemes,corrplot,GGally)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-data">Importing Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>WHRdata <span class="ot">=</span> <span class="fu">read.csv</span> (<span class="st">"data/WHRdataAllYear.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>CountryRegion <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"data/continents2.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(WHRdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Country.name year Life.Ladder Log.GDP.per.capita Social.support
1  Afghanistan 2008       3.724              7.350          0.451
2  Afghanistan 2009       4.402              7.509          0.552
3  Afghanistan 2010       4.758              7.614          0.539
4  Afghanistan 2011       3.832              7.581          0.521
5  Afghanistan 2012       3.783              7.661          0.521
6  Afghanistan 2013       3.572              7.680          0.484
  Healthy.life.expectancy.at.birth Freedom.to.make.life.choices Generosity
1                             50.5                        0.718      0.168
2                             50.8                        0.679      0.191
3                             51.1                        0.600      0.121
4                             51.4                        0.496      0.164
5                             51.7                        0.531      0.238
6                             52.0                        0.578      0.063
  Perceptions.of.corruption Positive.affect Negative.affect
1                     0.882           0.414           0.258
2                     0.850           0.481           0.237
3                     0.707           0.517           0.275
4                     0.731           0.480           0.267
5                     0.776           0.614           0.268
6                     0.823           0.547           0.273</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="ot">=</span>plyr<span class="sc">::</span><span class="fu">rename</span>(WHRdata, <span class="at">replace =</span> <span class="fu">c</span>( </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Country.name"</span> <span class="ot">=</span> <span class="st">"Country"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span><span class="ot">=</span><span class="st">"Year"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Life.Ladder"</span><span class="ot">=</span><span class="st">"Happiness.Score"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Log.GDP.per.capita"</span><span class="ot">=</span><span class="st">"Log.GDP.per.Capita"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Social.support"</span><span class="ot">=</span><span class="st">"Social.Support"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Healthy.life.expectancy.at.birth"</span><span class="ot">=</span><span class="st">"Healthy.Life.Expectancy"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Freedom.to.make.life.choices"</span><span class="ot">=</span><span class="st">"Freedom"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Generosity"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Perceptions.of.corruption"</span> <span class="ot">=</span> <span class="st">"Perceptions.of.Corruption"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Positive.affect"</span> <span class="ot">=</span> <span class="st">"Positive.Affect"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Negative.affect"</span> <span class="ot">=</span> <span class="st">"Negative.Affect"</span> ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>The following `from` values were not present in `x`: </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(WHRdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Country"                   "Year"                     
 [3] "Happiness.Score"           "Log.GDP.per.Capita"       
 [5] "Social.Support"            "Healthy.Life.Expectancy"  
 [7] "Freedom"                   "Generosity"               
 [9] "Perceptions.of.Corruption" "Positive.Affect"          
[11] "Negative.Affect"          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>CountryRegion<span class="ot">=</span>plyr<span class="sc">::</span><span class="fu">rename</span>(CountryRegion, <span class="at">replace =</span> <span class="fu">c</span>( </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a> <span class="st">"name"</span> <span class="ot">=</span> <span class="st">"Country"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a> <span class="st">"region"</span><span class="ot">=</span><span class="st">"Region"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a> <span class="st">"sub-region"</span> <span class="ot">=</span> <span class="st">"Sub.Region"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>The following `from` values were not present in `x`: sub-region</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>CountryRegion <span class="ot">=</span> <span class="fu">subset</span>(CountryRegion, <span class="at">select =</span> <span class="fu">c</span>(Country,Region,sub.region))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CountryRegion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Country"    "Region"     "sub.region"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#WHRdata1 &lt;- merge(WHRdata, CountryRegion, by = "Country", all.x = TRUE)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows of the merged dataset to verify</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#WHRdata1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(WHRdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2199 obs. of  11 variables:
 $ Country                  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ Year                     : int  2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 ...
 $ Happiness.Score          : num  3.72 4.4 4.76 3.83 3.78 ...
 $ Log.GDP.per.Capita       : num  7.35 7.51 7.61 7.58 7.66 ...
 $ Social.Support           : num  0.451 0.552 0.539 0.521 0.521 0.484 0.526 0.529 0.559 0.491 ...
 $ Healthy.Life.Expectancy  : num  50.5 50.8 51.1 51.4 51.7 ...
 $ Freedom                  : num  0.718 0.679 0.6 0.496 0.531 0.578 0.509 0.389 0.523 0.427 ...
 $ Generosity               : num  0.168 0.191 0.121 0.164 0.238 0.063 0.106 0.082 0.044 -0.119 ...
 $ Perceptions.of.Corruption: num  0.882 0.85 0.707 0.731 0.776 0.823 0.871 0.881 0.793 0.954 ...
 $ Positive.Affect          : num  0.414 0.481 0.517 0.48 0.614 0.547 0.492 0.491 0.501 0.435 ...
 $ Negative.Affect          : num  0.258 0.237 0.275 0.267 0.268 0.273 0.375 0.339 0.348 0.371 ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(WHRdata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  Country                      Year           Happiness.Score 
                        0                         0                         0 
       Log.GDP.per.Capita            Social.Support   Healthy.Life.Expectancy 
                       20                        13                        54 
                  Freedom                Generosity Perceptions.of.Corruption 
                       33                        73                       116 
          Positive.Affect           Negative.Affect 
                       24                        16 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Log.GDP.per.Capita <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Log.GDP.per.Capita, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Social.Support <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Social.Support, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Healthy.Life.Expectancy <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Healthy.Life.Expectancy, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Freedom <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Freedom, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Generosity <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Generosity, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Perceptions.of.Corruption <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Perceptions.of.Corruption, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Positive.Affect <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Positive.Affect, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>WHRdata<span class="sc">$</span>Negative.Affect <span class="ot">&lt;-</span> <span class="fu">ave</span>(WHRdata<span class="sc">$</span>Negative.Affect, WHRdata<span class="sc">$</span>Country, <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), x)</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(WHRdata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  Country                      Year           Happiness.Score 
                        0                         0                         0 
       Log.GDP.per.Capita            Social.Support   Healthy.Life.Expectancy 
                        9                         1                        32 
                  Freedom                Generosity Perceptions.of.Corruption 
                        0                         9                        29 
          Positive.Affect           Negative.Affect 
                        2                         1 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>rows_with_missing <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">rowSums</span>(<span class="fu">is.na</span>(WHRdata)) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the rows containing missing values</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>WHRdata[rows_with_missing, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       Country Year Happiness.Score Log.GDP.per.Capita
382                      China 2006           4.560              8.696
383                      China 2007           4.863              8.824
384                      China 2008           4.846              8.911
385                      China 2009           4.454              8.996
386                      China 2010           4.653              9.092
387                      China 2011           5.037              9.178
388                      China 2012           5.095              9.247
389                      China 2013           5.241              9.315
390                      China 2014           5.196              9.380
391                      China 2015           5.304              9.442
392                      China 2016           5.325              9.503
393                      China 2017           5.099              9.564
394                      China 2018           5.131              9.625
395                      China 2019           5.144              9.679
396                      China 2020           5.771              9.699
397                      China 2021           5.863              9.776
476                       Cuba 2006           5.418                 NA
794  Hong Kong S.A.R. of China 2006           5.511             10.746
795  Hong Kong S.A.R. of China 2008           5.137             10.816
796  Hong Kong S.A.R. of China 2009           5.397             10.788
797  Hong Kong S.A.R. of China 2010           5.643             10.847
798  Hong Kong S.A.R. of China 2011           5.474             10.887
799  Hong Kong S.A.R. of China 2012           5.484             10.893
800  Hong Kong S.A.R. of China 2014           5.458             10.939
801  Hong Kong S.A.R. of China 2016           5.498             10.970
802  Hong Kong S.A.R. of China 2017           5.362             10.999
803  Hong Kong S.A.R. of China 2019           5.659             10.995
804  Hong Kong S.A.R. of China 2020           5.295             10.931
805  Hong Kong S.A.R. of China 2021           5.322             11.002
1032                    Kosovo 2007           5.104              9.153
1033                    Kosovo 2008           5.522              8.858
1034                    Kosovo 2009           5.891              8.899
1035                    Kosovo 2010           5.177              8.940
1036                    Kosovo 2011           4.860              8.992
1037                    Kosovo 2012           5.640              9.000
1038                    Kosovo 2013           6.126              9.046
1039                    Kosovo 2014           5.000              9.082
1040                    Kosovo 2015           5.077              9.153
1041                    Kosovo 2016           5.759              9.213
1042                    Kosovo 2017           6.149              9.253
1043                    Kosovo 2018           6.392              9.283
1044                    Kosovo 2019           6.425              9.334
1045                    Kosovo 2020           6.294              9.279
1046                    Kosovo 2021           6.648              9.383
1047                    Kosovo 2022           6.160              9.416
1208                  Maldives 2018           5.198              9.893
1486                      Oman 2011           6.853             10.539
1756         Somaliland region 2009           4.991                 NA
1757         Somaliland region 2010           4.657                 NA
1758         Somaliland region 2011           4.931                 NA
1759         Somaliland region 2012           5.057                 NA
1793               South Sudan 2014           3.832                 NA
1794               South Sudan 2015           4.071                 NA
1795               South Sudan 2016           2.888                 NA
1796               South Sudan 2017           2.817                 NA
1997              Turkmenistan 2009           6.568              8.955
1998              Turkmenistan 2011           5.792              9.146
1999              Turkmenistan 2012           5.464              9.233
2000              Turkmenistan 2013           5.392              9.312
2001              Turkmenistan 2014           5.787              9.392
2002              Turkmenistan 2015           5.791              9.437
2003              Turkmenistan 2016           5.887              9.479
2004              Turkmenistan 2017           5.229              9.525
2005              Turkmenistan 2018           4.621              9.569
2006              Turkmenistan 2019           5.474              9.615
     Social.Support Healthy.Life.Expectancy Freedom Generosity
382           0.747                  65.660  0.8530     -0.176
383           0.811                  65.920  0.8530     -0.179
384           0.748                  66.180  0.8530     -0.095
385           0.798                  66.440  0.7710     -0.163
386           0.768                  66.700  0.8050     -0.136
387           0.787                  66.960  0.8240     -0.189
388           0.788                  67.220  0.8080     -0.187
389           0.778                  67.480  0.8050     -0.161
390           0.820                  67.740  0.8530     -0.219
391           0.794                  68.000  0.8530     -0.247
392           0.742                  68.125  0.8530     -0.230
393           0.772                  68.250  0.8780     -0.178
394           0.788                  68.375  0.8950     -0.161
395           0.822                  68.500  0.9270     -0.176
396           0.808                  68.625  0.8910     -0.106
397           0.856                  68.750  0.8750      0.022
476           0.970                  68.000  0.2810         NA
794           0.812                      NA  0.9100      0.151
795           0.840                      NA  0.9220      0.292
796           0.835                      NA  0.9180      0.303
797           0.857                      NA  0.8900      0.328
798           0.846                      NA  0.8940      0.230
799           0.826                      NA  0.8800      0.218
800           0.834                      NA  0.8430      0.219
801           0.832                      NA  0.8000      0.096
802           0.831                      NA  0.8310      0.136
803           0.856                      NA  0.7270      0.063
804           0.813                      NA  0.7050     -0.074
805           0.821                      NA  0.6690      0.022
1032          0.848                      NA  0.3810      0.174
1033          0.884                      NA  0.6360      0.097
1034          0.830                      NA  0.5060      0.206
1035          0.708                      NA  0.4510      0.174
1036          0.759                      NA  0.5890      0.006
1037          0.757                      NA  0.6360      0.030
1038          0.721                      NA  0.5680      0.117
1039          0.706                      NA  0.4410      0.013
1040          0.805                      NA  0.5610      0.180
1041          0.824                      NA  0.8270      0.123
1042          0.792                      NA  0.8580      0.115
1043          0.822                      NA  0.8900      0.267
1044          0.843                      NA  0.8410      0.244
1045          0.792                      NA  0.8800      0.304
1046          0.849                      NA  0.8400      0.261
1047          0.888                      NA  0.8650      0.211
1208          0.913                  69.775  0.8550      0.016
1486             NA                  62.340  0.9160      0.010
1756          0.880                      NA  0.7460         NA
1757          0.829                      NA  0.8200         NA
1758          0.788                      NA  0.8580         NA
1759          0.786                      NA  0.7580         NA
1793          0.545                  52.880  0.5670         NA
1794          0.585                  53.000  0.5120         NA
1795          0.532                  53.175  0.4400         NA
1796          0.557                  53.350  0.4560         NA
1997          0.924                  59.780  0.7675     -0.102
1998          0.964                  60.420  0.7675      0.018
1999          0.946                  60.740  0.7860     -0.123
2000          0.846                  61.060  0.7050     -0.072
2001          0.909                  61.380  0.8050      0.031
2002          0.960                  61.700  0.7010      0.092
2003          0.929                  61.800  0.7490      0.004
2004          0.908                  61.900  0.7200      0.065
2005          0.984                  62.000  0.8580      0.259
2006          0.982                  62.100  0.8920      0.284
     Perceptions.of.Corruption Positive.Affect Negative.Affect
382                         NA           0.658           0.170
383                         NA           0.664           0.159
384                         NA           0.705           0.147
385                         NA           0.670           0.162
386                         NA           0.658           0.158
387                         NA           0.710           0.134
388                         NA           0.689           0.159
389                         NA           0.717           0.142
390                         NA           0.710           0.112
391                         NA           0.667           0.171
392                         NA           0.683           0.146
393                         NA           0.682           0.214
394                         NA           0.722           0.190
395                         NA           0.760           0.147
396                         NA           0.663           0.245
397                         NA           0.698           0.240
476                         NA           0.596           0.277
794                      0.356           0.591           0.236
795                      0.274           0.575           0.237
796                      0.272           0.606           0.210
797                      0.256           0.601           0.183
798                      0.245           0.582           0.196
799                      0.380           0.580           0.183
800                      0.423           0.602           0.243
801                      0.403           0.569           0.213
802                      0.416           0.536           0.201
803                      0.432           0.519           0.358
804                      0.380           0.522           0.210
805                      0.390           0.534           0.224
1032                     0.894           0.614           0.237
1033                     0.849           0.500           0.318
1034                     0.968           0.528           0.169
1035                     0.967           0.673           0.118
1036                     0.919           0.604           0.124
1037                     0.950           0.562           0.100
1038                     0.935           0.650           0.203
1039                     0.775           0.552           0.206
1040                     0.851           0.685           0.180
1041                     0.941           0.588           0.150
1042                     0.925           0.617           0.186
1043                     0.922           0.642           0.170
1044                     0.920           0.612           0.141
1045                     0.910           0.593           0.201
1046                     0.842           0.578           0.116
1047                     0.846           0.549           0.142
1208                        NA              NA              NA
1486                        NA              NA           0.295
1756                     0.513           0.708           0.112
1757                     0.471           0.632           0.083
1758                     0.357           0.691           0.122
1759                     0.334           0.687           0.152
1793                     0.742           0.578           0.428
1794                     0.710           0.553           0.450
1795                     0.785           0.594           0.549
1796                     0.761           0.565           0.517
1997                        NA           0.695           0.152
1998                        NA           0.577           0.122
1999                        NA           0.541           0.117
2000                        NA           0.552           0.160
2001                        NA           0.614           0.154
2002                        NA           0.633           0.301
2003                        NA           0.560           0.255
2004                        NA           0.488           0.350
2005                        NA           0.567           0.189
2006                        NA           0.494           0.183</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>WHRdata_clean <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(WHRdata)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(WHRdata_clean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  Country                      Year           Happiness.Score 
                        0                         0                         0 
       Log.GDP.per.Capita            Social.Support   Healthy.Life.Expectancy 
                        0                         0                         0 
                  Freedom                Generosity Perceptions.of.Corruption 
                        0                         0                         0 
          Positive.Affect           Negative.Affect 
                        0                         0 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(WHRdata_clean<span class="sc">$</span>Country, <span class="at">by=</span><span class="fu">list</span>(WHRdata_clean<span class="sc">$</span>Year), <span class="at">FUN=</span>length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Group.1   x
1     2005  27
2     2006  86
3     2007 100
4     2008 107
5     2009 109
6     2010 120
7     2011 140
8     2012 136
9     2013 133
10    2014 139
11    2015 138
12    2016 136
13    2017 142
14    2018 137
15    2019 139
16    2020 113
17    2021 119
18    2022 113</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>